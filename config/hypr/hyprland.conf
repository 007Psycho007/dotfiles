#############################################
# ~/.config/hypr/hyprland.conf (no hy3)
#############################################

# Make sure ~/.config/hypr/colors.conf defines at least:
# $color_bg, $color_fg, $color_accent, $color_red, $color_green, $color_yellow, $color_blue, $color_magenta, $color_cyan
source = ~/.config/hypr/colors.conf

plugin = /usr/lib/libhy3.so
$terminal = kitty
$menu = rofi -show run
$mod = SUPER

# --- autostart ---------------------------------------------------------------
exec-once = hyprpm reload -n
exec-once = systemctl --user start hyprpolkitagent
exec-once = hyprpaper
exec-once = waybar
exec-once = kitty
exec-once = swaync

# --- general -----------------------------------------------------------------
general {
    gaps_in = 4
    gaps_out = 8
    border_size = 2
    layout = hy3

    # Use colors from colors.conf
    col.active_border = $color_accent $color_green 45deg
    col.inactive_border = $color_bg $color_bg

    resize_on_border = false
    allow_tearing = false
    # default layout is dwindle; no plugin layout
}

# dwindle layout settings (native)
dwindle {
    preserve_split = true
    force_split = 2
    default_split_ratio = 1.0
}

decoration {
    rounding = 8
    # (optional) uncomment if you define shadows in your colors.conf:
    # col.shadow = $color_bg
}

# (removed: plugin { hy3 { … } })

cursor {
    no_warps = true
}

plugin {
    hy3 {
        autotile {
            enable = true
        }
    }
}

input {
    follow_mouse = 2
    kb_options = caps:escape,grp:win_space_toggle
    kb_layout = us,de
}

# --- window rules ------------------------------------------------------------
windowrulev2 = workspace 4, class:^(discord)$
windowrulev2 = workspace 4, class:^(WebCord)$
windowrulev2 = workspace 2, class:^(firefox)$
windowrulev2 = workspace 2, class:^(qutebrowser)$
windowrulev2 = workspace 1, class:^(kitty)$
windowrulev2 = workspace 6, class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = workspace 6, class:^(streamcontroller)$
windowrulev2 = workspace 5, class:^(pavucontrol)$
windowrulev2 = workspace 10, class:^(Shadow PC)$
windowrulev2 = workspace 10, title:^(Shadow PC - Display)$
windowrulev2 = workspace 9, class:^(nvim)$
windowrulev2 = workspace 7, class:^(steam)$
windowrulev2 = workspace 4, class:^(Chromium-browser)$
windowrulev2 = workspace 8, class:^(obsidian)$
windowrulev2 = workspace 8, class:^(greenlight)$
windowrulev2 = workspace 2, class:^(brave-browser)$

# Match by exact title you showed in hyprctl
windowrulev2 = float, title:^(Picture in picture)$
windowrulev2 = size 28% 28%, title:^(Picture in picture)$
# bottom-right with a 24px margin, anchored to right/bottom using -w/-h
windowrulev2 = move onscreen 100%-w-24 100%-24, title:^(Picture in picture)$
windowrulev2 = workspace special:picinpic, title:^(Picture in picture)$

# Optional: keep it above other windows (not required for special WS, but nice elsewhere)
windowrulev2 = pin, title:^(Picture in picture)$
# --- mouse binds -------------------------------------------------------------
bindm = $mod, mouse:272, movewindow

# --- key binds ---------------------------------------------------------------
# basics
bind = $mod, F, fullscreenstate, 2
bind = $mod SHIFT, Q, killactive
bind = $mod, RETURN, exec, $terminal
bind = $mod, D, exec, $menu
bind = $mod, G, exec, wlogout
bind = $mod, V, togglefloating
bind = $mod, P, pseudo
bind = $mod, X, exec, hyprlock
bind = $mod, S, togglesplit
bind = $mod, C, exec, hyprshot -m region -o ~/Pictures/

# focus / move (hy3)
bind = $mod, H, hy3:movefocus, l
bind = $mod, L, hy3:movefocus, r
bind = $mod, K, hy3:movefocus, u
bind = $mod, J, hy3:movefocus, d
bind = $mod SHIFT, H, hy3:movewindow, l
bind = $mod SHIFT, L, hy3:movewindow, r
bind = $mod SHIFT, K, hy3:movewindow, u
bind = $mod SHIFT, J, hy3:movewindow, d
bind = $mod ALT, H, movecurrentworkspacetomonitor, l
bind = $mod ALT, L, movecurrentworkspacetomonitor, r
bind = SUPER, P, togglespecialworkspace, picinpic
# groups (hy3)
bind = $mod, T, hy3:makegroup, tab
bind = $mod, U, hy3:changegroup, untab

# media keys
bind = , XF86AudioNext, exec, playerctl next
bind = , XF86AudioPause, exec, playerctl play-pause
bind = , XF86AudioPlay, exec, playerctl play-pause
bind = , XF86AudioPrev, exec, playerctl previous

# workspaces 1–10
bind = $mod, 1, workspace, 1
bind = $mod, 2, workspace, 2
bind = $mod, 3, workspace, 3
bind = $mod, 4, workspace, 4
bind = $mod, 5, workspace, 5
bind = $mod, 6, workspace, 6
bind = $mod, 7, workspace, 7
bind = $mod, 8, workspace, 8
bind = $mod, 9, workspace, 9
bind = $mod, 0, workspace, 10

# move to workspace 1–10 (uses hy3 mover)
bind = $mod SHIFT, 1, hy3:movetoworkspace, 1
bind = $mod SHIFT, 2, hy3:movetoworkspace, 2
bind = $mod SHIFT, 3, hy3:movetoworkspace, 3
bind = $mod SHIFT, 4, hy3:movetoworkspace, 4
bind = $mod SHIFT, 5, hy3:movetoworkspace, 5
bind = $mod SHIFT, 6, hy3:movetoworkspace, 6
bind = $mod SHIFT, 7, hy3:movetoworkspace, 7
bind = $mod SHIFT, 8, hy3:movetoworkspace, 8
bind = $mod SHIFT, 9, hy3:movetoworkspace, 9
bind = $mod SHIFT, 0, hy3:movetoworkspace, 10

